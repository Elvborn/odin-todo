(()=>{var e={365:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,'*{\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    color: white;\n}\n\n:root{\n    --primary-background-color: #181818;\n    --secondary-background-color: #202020;\n    --content-background-color: #252525;\n    --new-button-color:#47C04D;\n    --edit-button-color:#C08E47;\n    --priority-1-color:#C0B247;\n    --priority-2-color:#C04747;\n}\n\nbutton[class*="button"]{\n    padding: .3rem .5rem;\n    border: 0;\n    border-radius: .5rem;\n    \n    font-size: 1rem;\n    font-weight: bold;    \n}\n\nbutton[class*="button"]:hover{\n    cursor: pointer;    \n}\n\n.new-button{\n    background-color: var(--new-button-color);\n}\n\n.new-button:hover{\n    background-color: color-mix(in srgb, var(--new-button-color) 80%, white 20%);\n}\n\n.edit-button{\n    background-color: var(--edit-button-color);\n}\n\n.edit-button:hover{\n    background-color: color-mix(in srgb, var(--edit-button-color) 80%, white 20%);\n}\n\n.delete-button{\n    background-color: var(--priority-2-color);\n}\n\n.delete-button:hover{\n    background-color: color-mix(in srgb, var(--priority-2-color) 80%, white 20%);\n}\n\nbody{\n    height: 100vh;\n\n    display: grid;\n    grid-template-areas: \n    "header header"\n    "side content";\n    grid-template-columns: 300px 1fr;\n    grid-template-rows: 90px 1fr;\n}\n\n#header{\n    grid-area: header;\n    \n    background-color: var(--primary-background-color);\n    padding-left: 30px;\n\n    display: flex;\n    align-items: center;\n}\n\n#header button{\n    margin-left: auto;\n\n    background-color: var(--primary-background-color);\n    color: white;\n    border: 0;\n    padding: 3rem 2rem;\n\n    font-weight: bold;\n    font-size: 1.5rem;\n}\n\n#header button:hover{\n    cursor: pointer;\n    background-color: color-mix(in srgb, var(--primary-background-color) 70%, red 30%);\n}\n\n#side{\n    grid-area: side;\n\n    background-color: var(--secondary-background-color);\n\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr;\n    grid-auto-rows: 70px;\n}\n\n#side div, li{\n    padding-left: 30px;\n    padding-right: 20px;\n\n    display: flex;\n    align-items: center;\n}\n\n#side button{\n    margin-left: auto;\n}\n\n#side #side-title{\n    height: 3rem;\n}\n\n#side li{\n    --border-color:rgb(96, 96, 96);\n\n    height: 50px;\n    border-bottom: 2px solid var(--border-color);\n    background-color: var(--primary-background-color);\n\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: "...";\n}\n\n#side h3{\n    font-weight: 400;\n    font-style: normal;\n}\n\n#side .selected{\n    background-color: var(--content-background-color);\n}\n\n#side .selected h3{\n    font-style: italic;\n}\n\n#side li:hover{\n    cursor: pointer;\n    background-color: var(--content-background-color);\n}\n\n#side li:nth-child(1){\n    border-top: 2px solid var(--border-color);\n}\n\n#side li:nth-last-child(1){\n    border-bottom:0;\n}\n\n#content{\n    --content-gap: 1.5rem;\n    grid-area: content;\n    padding-inline: 2rem;\n    padding-block: var(--content-gap);\n\n    background-color: var(--content-background-color);\n\n    display: grid;\n    grid-template-columns: auto;\n    grid-auto-rows: auto;\n    align-content: start;\n    gap: 1rem;\n}\n\n#content #project-details{\n    display: grid;\n    grid-template-columns: 1fr auto auto;\n    grid-template-rows: auto auto;\n    align-items: center;\n    gap: 10px;\n}\n\n#content #project-details h2{\n    font-style: italic;\n}\n\n#content .item-container{\n    grid-column: span 3;\n}\n\n#content .todo{\n    --item-gap:.5rem;\n\n    font-weight: bold;\n\n    display: grid;\n    grid-template-columns: 1fr auto auto;\n    grid-auto-rows: auto;\n    gap: var(--item-gap);\n}\n\n.item-container{\n    --item-content-padding:1rem;\n    --item-content-gap:1.5rem;\n    --item-border-radius:1rem;\n\n    grid-column: span 3;\n    position: relative;\n    background-color: var(--primary-background-color);\n    padding: var(--item-content-padding);\n\n    border-radius: var(--item-border-radius);\n\n    display: flex;\n    align-items: center;\n    gap: var(--item-content-gap);\n}\n\n.item-container div{\n    margin-left: auto;\n    \n    text-wrap: nowrap;\n\n    display: flex;\n    align-items: center;\n    gap: var(--item-content-gap);\n}\n\n.item-container input[type="checkbox"]{\n    flex-shrink: 0;\n    --checkbox-size: 1.2rem;\n    \n    position: relative;\n    appearance: none;\n    height: var(--checkbox-size);\n    width: var(--checkbox-size);\n    background-color: var(--primary-background-color);\n    border: 2px solid white;\n    border-radius: calc(var(--checkbox-size) / 5);\n    cursor: pointer;\n}\n\n.item-container label{\n    cursor: pointer;\n}\n\n.item-container input[type="checkbox"]:checked{\n    appearance: none;\n    background-color: white;\n}\n\n.item-container input[type="checkbox"]:checked::after{\n    content: "";\n    position: absolute;\n    left: calc(var(--checkbox-size) / 2 - 5px);\n    top: calc(var(--checkbox-size) / 2 - 10px);\n    width: 5px;\n    height: 10px;\n    border: solid black;\n    border-width: 0 3px 3px 0;\n    transform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n    -ms-transform: rotate(45deg);\n}\n\n.item-container[class*="priority"]{\n    --priority-size:.5rem;\n    padding-left: calc(var(--item-content-padding) - var(--priority-size));\n    border-left: var(--priority-size) solid white;\n}\n\n.item-container.priority1{\n    border-left: var(--priority-size) solid var(--priority-1-color);\n}\n\n.item-container.priority2{\n    border-left: var(--priority-size) solid var(--priority-2-color);\n}\n\n.scrollable{\n    overflow-y: auto;\n    scrollbar-width: 100px;\n    scrollbar-color: var(--primary-background-color) var(--secondary-background-color);\n}\n\ndialog{\n    --form-width: clamp(200px, 500px, 90%);\n\n    position:absolute;\n    top: 120px;\n    left: calc(100vw / 2 - var(--form-width) / 2);\n    border: 0;\n    background-color: transparent;\n\n    width: var(--form-width);\n}\n\ndialog::backdrop{\n    background-color: rgba(0, 0, 0, 50%);\n}\n\nform{\n    --form-gap:1rem;\n\n    background-color: var(--primary-background-color);\n    padding: 2rem;\n    border-radius: 1rem;\n\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-auto-rows: auto;\n    gap:var(--form-gap);\n}\n\nform legend{\n    justify-self: center;\n    font-size: 2rem;\n}\n\nform div{\n    display: grid;\n    gap: .3rem;\n}\n\nform .buttons{\n    display: flex;\n    justify-content: center;\n    gap: var(--form-gap);\n}\n\nform input, textarea, select{\n    padding:.5rem;\n    padding-inline: .5rem;\n    resize: none;\n\n    background-color: var(--secondary-background-color);\n    border: 2px solid var(--content-background-color);\n    border-radius: .5rem;\n}\n\ninput:invalid:focus {\n    outline: 1px solid var(--priority-2-color);\n}',""]);const c=a},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},224:function(e,t,n){e=n.nmd(e),function(n){"use strict";var r={};n.PubSub?(r=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=r,function(e){var t={},n=-1;function r(e,t,n){try{e(t,n)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function o(e,t,n){e(t,n)}function i(e,n,i,a){var c,s=t[n],u=a?o:r;if(Object.prototype.hasOwnProperty.call(t,n))for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&u(s[c],e,i)}function a(e){var n=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,n)&&function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}(t[n]))}function c(e,t,n,r){var o=function(e,t,n){return function(){var r=String(e),o=r.lastIndexOf(".");for(i(e,e,t,n);-1!==o;)o=(r=r.substr(0,o)).lastIndexOf("."),i(e,r,t,n);i(e,"*",t,n)}}(e="symbol"==typeof e?e.toString():e,t,r);return!!function(e){for(var t=String(e),n=a(t)||a("*"),r=t.lastIndexOf(".");!n&&-1!==r;)r=(t=t.substr(0,r)).lastIndexOf("."),n=a(t);return n}(e)&&(!0===n?o():setTimeout(o,0),!0)}e.publish=function(t,n){return c(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return c(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var o="uid_"+String(++n);return t[e][o]=r,o},e.subscribeAll=function(t){return e.subscribe("*",t)},e.subscribeOnce=function(t,n){var r=e.subscribe(t,(function(){e.unsubscribe(r),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&delete t[n]},e.countSubscriptions=function(e){var n,r,o=0;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)){for(r in t[n])o++;break}return o},e.getSubscriptions=function(e){var n,r=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&r.push(n);return r},e.unsubscribe=function(n){var r,o,i,a="string"==typeof n&&(Object.prototype.hasOwnProperty.call(t,n)||function(e){var n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e))return!0;return!1}(n)),c=!a&&"string"==typeof n,s="function"==typeof n,u=!1;if(!a){for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(o=t[r],c&&o[n]){delete o[n],u=n;break}if(s)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===n&&(delete o[i],u=!0)}return u}e.clearSubscriptions(n)}}(r)),void 0!==e&&e.exports&&(t=e.exports=r),t.PubSub=r,e.exports=t=r}("object"==typeof window&&window||this||n.g)},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],c=0;c<e.length;c++){var s=e[c],u=r.base?s[0]+r.base:s[0],d=i[u]||0,l="".concat(u," ").concat(d);i[u]=d+1;var p=n(l),b={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)t[p].references++,t[p].updater(b);else{var m=o(b,r);r.byIndex=c,t.splice(c,0,{identifier:l,updater:m,references:1})}a.push(l)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=n(i[a]);t[c].references--}for(var s=r(e,o),u=0;u<i.length;u++){var d=n(i[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=s}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.nc=void 0,(()=>{"use strict";var e=n(72),t=n.n(e),r=n(825),o=n.n(r),i=n(659),a=n.n(i),c=n(56),s=n.n(c),u=n(540),d=n.n(u),l=n(113),p=n.n(l),b=n(365),m={};m.styleTagTransform=p(),m.setAttributes=s(),m.insert=a().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=d(),t()(b.A,m),b.A&&b.A.locals&&b.A.locals;var f=n(224),g=n.n(f);let h=[];function v(e,t){const n=[];let r=!1;return{get name(){return e},get description(){return t},get todoList(){return n},set todoList(e){n=e},get selected(){return r},set selected(e){r=e},addTodo:e=>{n.push(E(e)),PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T())},update:(n,r)=>{e=n,t=r,PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T()),PubSub.publish("UPDATE-SIDE",h)},removeTodo:e=>{if(!n.includes(e))return;const t=n.indexOf(e);n.splice(t,1),PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T())}}}function E(e){const t=[];return{get name(){return e},get todoItems(){return t},set todoItems(e){t=e},addItem:(e,n,r)=>{t.push(y(e,n,r)),PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T())},update:t=>{e=t,PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T())},removeItem:e=>{if(!t.includes(e))return;const n=t.indexOf(e);t.splice(n,1),PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T())}}}function y(e,t,n=0){let r=!1;return{get name(){return e},get isChecked(){return r},set isChecked(e){r=e},get priority(){return n},get dueDate(){return t},update:(r,o,i)=>{e=r,t=o,n=i,PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T())},getDateAsString:()=>null===t?t:`${t.getDate()} / ${t.getMonth()+1} - ${t.getFullYear()}`,getDateAsInputFormat:()=>{if(null===t)return t;const e=("0"+t.getDate()).slice(-2),n=("0"+(t.getMonth()+1)).slice(-2);return t.getFullYear()+"-"+n+"-"+e},toggleChecked:()=>{r=!r,PubSub.publish("SAVE")}}}function T(){return h.find((e=>!0===e.selected))}function x(){const e=localStorage.projects,t=localStorage.length>0&&void 0!==e?JSON.parse(e):[],n=[];if(0===t.length){const e=v("Default Project","This is the project description"),t=E("Todo"),r=y("Create your own project!",null,2);t.todoItems.push(r),e.todoList.push(t),n.push(e)}else t.forEach((e=>{const t=v(e.name,e.description);e.todoList.forEach((e=>{const n=E(e.name);e.todoItems.forEach((e=>{const t=e.dueDate?new Date(e.dueDate):null,r=y(e.name,t,e.priority);e.isChecked&&(r.isChecked=!0),n.todoItems.push(r)})),t.todoList.push(n)})),n.push(t)}));PubSub.publish("LOAD-COMPLETED",n)}function S(e=null){const t=document.querySelector("#project-dialog");t.innerHTML="";const n=k("form",{attributes:{id:"project-form",method:"dialog"}});n.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),p.click())})),t.append(n);const r=k("label",{innerText:"Create Project"});n.append(r);const o=k("div");n.append(o);const i=k("label",{innerText:"Project Name",attributes:{for:"project-name"}});o.append(i);const a=k("input",{attributes:{type:"text",name:"projectName",id:"project-name",placeholder:"Required",required:!0,value:null===e?"":e.name}});o.append(a);const c=k("div");n.append(c);const s=k("label",{innerText:"Description",attributes:{for:"project-description"}});c.append(s);const u=k("input",{attributes:{name:"projectDescription",id:"project-description",rows:3,value:null===e?"":e.description}});c.append(u);const d=k("div",{attributes:{class:"buttons"}});n.append(d);const l=k("button",{innerText:"Cancel",attributes:{class:"delete-button",formNoValidate:!0}});if(d.append(l),null!==e){const n=k("button",{innerText:"Delete",attributes:{id:"project-delete",class:"delete-button"},options:{formNoValidate:!0}});n.addEventListener("click",(n=>{console.log("Test"),n.preventDefault(),PubSub.publish("DELETE-PROJECT",{project:e}),t.close()})),d.append(n)}const p=k("button",{innerText:null===e?"Create":"Save",attributes:{id:"item-submit",class:"new-button",type:"submit"}});p.addEventListener("click",(()=>{const r=Object.fromEntries(new FormData(n));if(0===r.projectName.length)return;const o=null===e?"CREATE-PROJECT":"UPDATE-PROJECT";PubSub.publish(o,{project:e,name:r.projectName,description:r.projectDescription}),n.reset(),t.close()})),d.append(p),t.showModal()}function P(e=null){const t=document.querySelector("#todo-dialog");t.innerHTML="";const n=k("form",{attributes:{id:"todo-form",method:"dialog"}});n.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),u.click())})),t.append(n);const r=k("legend",{innerText:"Create Todo"});n.append(r);const o=k("div");n.append(o);const i=k("label",{innerText:"Todo Name",attributes:{for:"todo-name"}});o.append(i);const a=k("input",{attributes:{type:"text",name:"todoName",id:"todo-name",placeholder:"Required",required:!0,value:null===e?"":e.name}});o.append(a);const c=k("div",{attributes:{class:"buttons"}});n.append(c);const s=k("button",{innerText:"Cancel",attributes:{class:"delete-button",formNoValidate:!0}});if(s.addEventListener("click",(e=>{e.preventDefault(),t.close()})),c.append(s),null!==e){const n=k("button",{innerText:"Delete",attributes:{id:"item-delete",class:"delete-button"},options:{formNoValidate:!0}});n.addEventListener("click",(n=>{n.preventDefault(),PubSub.publish("DELETE-TODO",{todo:e}),t.close()})),c.append(n)}const u=k("button",{innerText:null===e?"Create":"Save",attributes:{id:"item-submit",class:"new-button",type:"submit"}});u.addEventListener("click",(()=>{const r=Object.fromEntries(new FormData(n));if(0===r.todoName.length)return;const o=null===e?"CREATE-TODO":"UPDATE-TODO";PubSub.publish(o,{todo:e,todoName:r.todoName}),n.reset(),t.close()})),c.append(u),t.showModal()}function O(e,t=null){const n=document.querySelector("#item-dialog");n.innerHTML="";const r=k("form",{attributes:{method:"dialog",id:"item-form"}});r.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),v.click())})),n.append(r);const o=k("legend",{innerText:"Create Todo Item"});r.append(o);const i=k("div");r.append(i),nameLabel=k("label",{innerText:"Item Name",attributes:{for:"item-name"}}),i.append(nameLabel);const a=k("input",{attributes:{type:"text",name:"itemName",id:"item-name",placeholder:"Required",required:!0,value:null===t?"":t.name}});i.append(a);const c=k("div");r.append(c);const s=k("label",{innerText:"Due Date",attributes:{for:"item-date"}});c.append(s);const u=k("input",{attributes:{type:"date",name:"itemDate",id:"item-date",value:null===t?"":t.getDateAsInputFormat()}});c.append(u);const d=k("div");r.append(d);const l=k("label",{innerText:"Priority",attributes:{for:"item-priority"}});d.append(l);const p=k("select",{attributes:{name:"itemPriority",id:"item-priority"}}),b=k("option",{innerText:"Default",attributes:{value:0}}),m=k("option",{innerText:"Important",attributes:{value:1}}),f=k("option",{innerText:"Urgent",attributes:{value:2}});p.options.add(b),p.options.add(m),p.options.add(f),p.value=null===t?0:t.priority,d.append(p);const g=k("div",{attributes:{class:"buttons"}});r.append(g);const h=k("button",{innerText:"Cancel",attributes:{class:"delete-button"},options:{formNoValidate:!0}});if(h.addEventListener("click",(e=>{e.preventDefault(),n.close()})),g.append(h),null!==t){const r=k("button",{innerText:"Delete",attributes:{id:"item-delete",class:"delete-button"},options:{formNoValidate:!0}});r.addEventListener("click",(r=>{r.preventDefault(),PubSub.publish("DELETE-TODO-ITEM",{todo:e,item:t}),n.close()})),g.append(r)}const v=k("button",{innerText:null===t?"Create":"Save",attributes:{id:"item-submit",class:"new-button",type:"submit"}});v.addEventListener("click",(()=>{const o=Object.fromEntries(new FormData(r));let i=isNaN(new Date(o.itemDate))?null:new Date(o.itemDate);if(0===o.itemName.length||void 0===o.itemPriority)return;const a=null===t?"CREATE-TODO-ITEM":"UPDATE-TODO-ITEM";PubSub.publish(a,{todo:e,item:t,name:o.itemName,date:i,priority:Number(o.itemPriority)}),r.reset(),n.close()})),g.append(v),n.showModal()}function k(e,t={}){const n=document.createElement(e);if(t.hasOwnProperty("innerText")&&(n.textContent=t.innerText),t.hasOwnProperty("attributes"))for(const[e,r]of Object.entries(t.attributes))n.setAttribute(e,r);if(t.hasOwnProperty("options"))for(const[e,r]of Object.entries(t.options))n[e]=r;return n}PubSub.subscribe("PROJECT-SELECTED",(function(e,t){void 0===t&&(t=h[0]),h.forEach((e=>{e.selected=e===t})),PubSub.publish("UPDATE-SIDE",h),PubSub.publish("UPDATE-CONTENT",t)})),PubSub.subscribe("CREATE-PROJECT",((e,t)=>{!function(e,t){const n=v(e,t);h.push(n),PubSub.publish("PROJECT-SELECTED",n),PubSub.publish("SAVE")}(t.name,t.description)})),PubSub.subscribe("UPDATE-PROJECT",((e,t)=>{t.project.update(t.name,t.description)})),PubSub.subscribe("DELETE-PROJECT",((e,t)=>{if(console.log(t.project),!h.includes(t.project))return;const n=h.indexOf(t.project);h.splice(n,1),PubSub.publish("SAVE"),PubSub.publish("UPDATE-CONTENT",T()),PubSub.publish("UPDATE-SIDE",h)})),PubSub.subscribe("CREATE-TODO",((e,t)=>{T().addTodo(t.todoName)})),PubSub.subscribe("UPDATE-TODO",((e,t)=>{t.todo.update(t.todoName)})),PubSub.subscribe("DELETE-TODO",((e,t)=>{T().removeTodo(t.todo)})),PubSub.subscribe("ITEM-CHECKBOX-CHANGED",((e,t)=>{t.toggleChecked()})),PubSub.subscribe("CREATE-TODO-ITEM",((e,t)=>{t.todo.addItem(t.name,t.date,t.priority)})),PubSub.subscribe("UPDATE-TODO-ITEM",((e,t)=>{t.item.update(t.name,t.date,t.priority)})),PubSub.subscribe("DELETE-TODO-ITEM",((e,t)=>{t.todo.removeItem(t.item)})),PubSub.subscribe("LOAD-COMPLETED",((e,t)=>{h=t,PubSub.publish("PROJECT-SELECTED",h[0])})),PubSub.subscribe("SAVE",(function(){localStorage.projects=JSON.stringify(h)})),PubSub.subscribe("LOAD",x),PubSub.subscribe("RESET",(function(){localStorage.clear(),x()})),document.querySelector(".create-project").addEventListener("click",(()=>{S()})),document.querySelector(".reset").addEventListener("click",(()=>{PubSub.publish("RESET")})),PubSub.subscribe("UPDATE-SIDE",(function(e,t){const n=document.querySelector("#project-list");n.innerHTML="",function(e,t){t.forEach((t=>{const n=document.createElement("li");n.addEventListener("click",(e=>{"selected"!==e.target.className&&PubSub.publish("PROJECT-SELECTED",t)}));const r=document.createElement("h3");r.textContent=t.name,t.selected&&(n.className="selected"),n.append(r),e.append(n)}))}(n,t)})),PubSub.subscribe("UPDATE-CONTENT",(function(e,t){document.querySelector("#content").innerHTML="",void 0!==t&&(function(e){const t=k("div");t.id="project-details",content.append(t);const n=k("h2",{innerText:e.name,attributes:{class:"content-title"}});t.append(n);const r=k("button",{innerText:"Edit Project",attributes:{class:"edit-button"}});r.addEventListener("click",(()=>{S(e)})),t.append(r);const o=k("button",{innerText:"New Todo",attributes:{class:"new-button"}});if(o.addEventListener("click",(()=>{P()})),t.append(o),null!=e.description&&e.description.length>0){const n=k("div",{innerText:e.description,attributes:{class:"item-container"}});t.append(n)}}(t),function(e){e.todoList.forEach((e=>{const t=k("div",{attributes:{class:"todo"}});content.append(t);const n=k("h2",{innerText:e.name,attributes:{class:"content-title"}});t.append(n);const r=k("button",{innerText:"Edit Todo",attributes:{class:"edit-button"}});r.addEventListener("click",(()=>{P(e)})),t.append(r);const o=k("button",{innerText:"Add Item",attributes:{class:"new-button"}});o.addEventListener("click",(()=>{O(e)})),t.append(o),e.todoItems.forEach(((n,r)=>{const o=k("div",{attributes:{class:"item-container"}});null!=n.priority&&n.priority>0&&o.classList.add(`priority${n.priority}`),t.append(o);const i=k("input",{attributes:{type:"checkbox",id:`checkbox_${r}`,name:`checkbox_${r}`},options:{checked:n.isChecked}});i.addEventListener("change",(()=>{PubSub.publish("ITEM-CHECKBOX-CHANGED",n)})),o.append(i);const a=k("label",{innerText:n.name,attributes:{for:`checkbox_${r}`}});o.append(a);const c=k("div");o.append(c);const s=k("p",{innerText:null===n.getDateAsString()?"":n.getDateAsString(),attributes:{class:"due-date"}});c.append(s);const u=k("button",{innerText:"Edit",attributes:{class:"edit-button"}});u.addEventListener("click",(()=>{O(e,n)})),c.append(u)}))}))}(t))})),g().publish("LOAD")})()})();